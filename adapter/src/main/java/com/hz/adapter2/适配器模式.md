# é€‚é…å™¨æ¨¡å¼

è¿™é‡Œæˆ‘ä¸ºæ‚¨ä»‹ç»äº†å¦ä¸€ç§æœ‰ç”¨çš„è®¾è®¡æ¨¡å¼â€”â€”é€‚é…å™¨è®¾è®¡æ¨¡å¼ã€‚æˆ‘è¿˜å°†å¼ºè°ƒè£…é¥°å™¨è®¾è®¡æ¨¡å¼ï¼ˆè¯·å‚é˜…æˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« ï¼ŒJavaä¸­çš„è£…é¥°å™¨è®¾è®¡æ ·å¼ï¼‰å’Œé€‚é…å™¨è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å·®å¼‚ã€‚

## ä»‹ç»

- é€‚é…å™¨è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„è®¾è®¡æ¨¡å¼ï¼Œå…è®¸ä¸¤ä¸ªä¸ç›¸å…³/ä¸å¸¸è§çš„æ¥å£ä¸€èµ·å·¥ä½œã€‚æ¢å¥è¯è¯´ï¼Œé€‚é…å™¨æ¨¡å¼ä½¿ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£å…¼å®¹ï¼Œè€Œä¸æ›´æ”¹å…¶ç°æœ‰ä»£ç ã€‚

- æ¥å£å¯èƒ½ä¸å…¼å®¹ï¼Œä½†å†…éƒ¨åŠŸèƒ½åº”ç¬¦åˆè¦æ±‚ã€‚

- é€‚é…å™¨æ¨¡å¼é€šå¸¸ç”¨äºåœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ä½¿ç°æœ‰ç±»ä¸å…¶ä»–ç±»ååŒå·¥ä½œã€‚

- é€‚é…å™¨æ¨¡å¼ä½¿ç”¨å•ä¸ªç±»ï¼ˆé€‚é…å™¨ç±»ï¼‰è¿æ¥ç‹¬ç«‹æˆ–ä¸å…¼å®¹æ¥å£/ç±»çš„åŠŸèƒ½ã€‚

- é€‚é…å™¨æ¨¡å¼ä¹Ÿç§°ä¸ºåŒ…è£…å™¨ï¼Œå®ƒæ˜¯ä¸è£…é¥°å™¨è®¾è®¡æ¨¡å¼å…±äº«çš„å¦ä¸€ç§å‘½åæ–¹å¼ã€‚

- æ­¤æ¨¡å¼å°†ç±»ï¼ˆé€‚é…å™¨ï¼‰çš„ï¼ˆä¸å…¼å®¹ï¼‰æ¥å£è½¬æ¢ä¸ºå®¢æˆ·ç«¯éœ€è¦çš„å¦ä¸€ä¸ªæ¥å£ï¼ˆç›®æ ‡ï¼‰ã€‚

- é€‚é…å™¨æ¨¡å¼è¿˜å…è®¸ç±»ä¸€èµ·å·¥ä½œï¼Œå¦åˆ™ï¼Œç”±äºæ¥å£ä¸å…¼å®¹ï¼Œæ— æ³•å·¥ä½œã€‚

- ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªäººå¸¦ç€ç¬”è®°æœ¬ç”µè„‘å’Œç§»åŠ¨è®¾å¤‡åœ¨ä¸åŒå›½å®¶æ—…è¡Œã€‚æˆ‘ä»¬åœ¨ä¸åŒçš„å›½å®¶æµ‹é‡äº†ä¸åŒçš„ç”µæºæ’åº§ã€ç”µå‹å’Œé¢‘ç‡ï¼Œè¿™ä½¿å¾—ä¸€ä¸ªå›½å®¶çš„ä»»ä½•è®¾å¤‡éƒ½å¯ä»¥åœ¨å¦ä¸€ä¸ªå›½å®¶è‡ªç”±ä½¿ç”¨ã€‚åœ¨è‹±å›½ï¼Œæˆ‘ä»¬ä½¿ç”¨230ä¼50èµ«å…¹çš„Gå‹æ’åº§ã€‚åœ¨ç¾å›½ï¼Œæˆ‘ä»¬ä½¿ç”¨120ä¼å’Œ60èµ«å…¹é¢‘ç‡çš„Aå‹å’ŒBå‹æ’åº§ã€‚åœ¨å°åº¦ï¼Œæˆ‘ä»¬ä½¿ç”¨230ä¼50èµ«å…¹çš„Cå‹ã€Då‹å’ŒMå‹æ’åº§ã€‚æœ€åï¼Œåœ¨æ—¥æœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨110ä¼å’Œ50èµ«å…¹é¢‘ç‡çš„Aå‹å’ŒBå‹æ’åº§ã€‚è¿™ä½¿å¾—æˆ‘ä»¬æºå¸¦çš„ç”µå™¨ä¸æˆ‘ä»¬åœ¨ä¸åŒåœ°æ–¹çš„ç”µæ°”è§„æ ¼ä¸å…¼å®¹ã€‚

- è¿™ä½¿å¾—é€‚é…å™¨å·¥å…·è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å°†ä¸å…¼å®¹çš„ä»£ç è½¬æ¢ä¸ºå…¼å®¹çš„ä»£ç ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰å®ç°ä»»ä½•é™„åŠ åŠŸèƒ½ï¼Œåªæœ‰å…¼å®¹æ€§ã€‚

## å®ç°

â€‹	ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå‡ ä½•å½¢çŠ¶çš„ä¾‹å­ã€‚æˆ‘å°†ç¤ºä¾‹ä¿æŒç›¸å¯¹ç®€å•ï¼Œä»¥ä¿æŒå¯¹æ¨¡å¼çš„å…³æ³¨ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç»˜å›¾é¡¹ç›®ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªåä¸º`Shape`çš„é€šç”¨æ¥å£å¼€å‘ä¸åŒç±»å‹çš„å‡ ä½•å½¢çŠ¶ï¼Œè¿™äº›å½¢çŠ¶å°†åœ¨ç»˜å›¾çš„æ—¶å€™ä½¿ç”¨ã€‚

ä¸‹é¢æ˜¯`Shape`æ¥å£çš„ä¾‹å­ï¼š

```java
public interface Shape {
      void draw();
      void resize();
      String description();
      boolean isHide();
}
```

ä¸‹é¢æ˜¯å…·ä½“å®ç°ç±»çš„ä»£ç ï¼Œ`Rectangle`ï¼š

```java
public class Rectangle implements Shape {

    @Override
    public void draw() {
        System.out.println("ç”»ä¸ªé•¿æ–¹å½¢");
    }

    @Override
    public void resize() {
        System.out.println("è°ƒæ•´é•¿æ–¹å½¢å¤§å°");
    }

    @Override
    public String description() {
        return "é•¿æ–¹å½¢";
    }

    @Override
    public boolean isHide() {
        return false;
    }

}

```

ä¸‹é¢æ˜¯å…·ä½“å®ç°ç±»çš„ä»£ç ï¼Œ`Circle`ï¼š

```java
public class Circle implements Shape {

    @Override
    public void draw() {
        System.out.println("ç”»ä¸ªåœˆåœˆ");
    }

    @Override
    public void resize() {
        System.out.println("è°ƒæ•´åœ†åœˆçš„å¤§å°");
    }

    @Override
    public String description() {
        return "åœ†å½¢";
    }

    @Override
    public boolean isHide() {
        return false;
    }

}
```

ä¸‹é¢æ˜¯`Drawing`ç±»çš„ä¾‹å­ï¼š

```java
public class Drawing {

    List<Shape> shapes = new ArrayList<>();

    public Drawing() {
        super();
    }

    public void addShape(Shape shape) {
        shapes.add(shape);
    }

    public List<Shape> getShapes() {
        return new ArrayList<>(shapes);
    }

    public void draw() {
        if (shapes.isEmpty()) {
            System.out.println("æ²¡ä»€ä¹ˆå¯ç”»çš„!");
        } else {
            shapes.forEach(Shape::draw);
        }
    }

    public void resize() {
        if (shapes.isEmpty()) {
            System.out.println("æ²¡æœ‰å¯è°ƒæ•´çš„!");
        } else {
            shapes.forEach(Shape::resize);
        }
    }
}

```

ä¸‹é¢æ˜¯`Main`ç±»çš„ä»£ç ï¼Œæ¥æ‰§è¡Œå’Œæµ‹è¯•`Drawing`ç±»ï¼š

```java
public class Main {
    public static void main(String[] args) {

        System.out.println("å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...");
        Drawing drawing = new Drawing();
        drawing.addShape(new Rectangle());
        drawing.addShape(new Circle());

        drawing.draw();
        drawing.resize();
    }
}
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚éšç€æˆ‘ä»¬çš„è¿›æ­¥ï¼Œæˆ‘ä»¬é€æ¸äº†è§£åˆ°æœ‰ä¸€äº›é¢å¤–çš„å‡ ä½•å½¢çŠ¶å·²ç»ç”±æˆ‘ä»¬ç»„ç»‡å†…çš„å…¶ä»–å›¢é˜Ÿå¼€å‘å‡ºæ¥ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯ç”¨çš„ç¬¬ä¸‰æ–¹APIã€‚ä¸‹é¢å°±æ˜¯å¯ä»¥ä½¿ç”¨çš„ç±»ã€‚

ä¸‹é¢æ˜¯`GeometricShape`æ¥å£çš„ä»£ç ç¤ºä¾‹ï¼š

```java
public interface GeometricShape {

      double area();
      double perimeter();
      void drawShape();

}
```

ä¸‹é¢æ˜¯å…·ä½“çš„å®ç°ç±»`Triangle`ï¼š

```java

public class Triangle implements GeometricShape {
    /**
     * è¾¹é•¿
     */
    private final double a;
    private final double b;
    private final double c;

    public Triangle() {
        this(1.0d, 1.0d, 1.0d);
    }

    public Triangle(double a, double b, double c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }

    @Override
    public double area() {
        // Heron's formula:
        // Area = SquareRoot(s * (s - a) * (s - b) * (s - c))
        // where s = (a + b + c) / 2, or 1/2 of the perimeter of the triangle
        double s = (a + b + c) / 2;
        return Math.sqrt(s * (s - a) * (s - b) * (s - c));
    }

    @Override
    public double perimeter() {
        // P = a + b + c
        return a + b + c;
    }

    @Override
    public void drawShape() {
        System.out.println("ç»˜åˆ¶ä¸‰è§’å½¢çš„é¢ç§¯: " + area() + " å’Œå‘¨é•¿: " + perimeter());
    }

}
```

ä¸‹é¢æ˜¯å…·ä½“çš„å®ç°ç±»`Rhombus`ï¼š

```java
public class Rhombus implements GeometricShape {
    /**
     * è¾¹
     */
    private final double a;
    private final double b;

    public Rhombus() {
        this(1.0d, 1.0d);
    }

    public Rhombus(double a, double b) {
        this.a = a;
        this.b = b;
    }

    @Override
    public double area() {
        return a * b;
    }

    @Override
    public double perimeter() {
        return 2 * (a + b);
    }

    @Override
    public void drawShape() {
        System.out.println("ç»˜åˆ¶è±å½¢çš„é¢ç§¯: " + area() + " å’Œå‘¨é•¿: " + perimeter());
    }

}
```

â€‹	ç”±äºè¿™äº›å·¥ä½œæ˜¯é€šè¿‡å…¶ä»–å›¢é˜Ÿæˆ–ç»„ç»‡å®Œæˆçš„ï¼Œå› æ­¤ä»–ä»¬å¾ˆæœ‰å¯èƒ½ä½¿ç”¨è‡ªå·±çš„è§„èŒƒã€‚æ‰€æœ‰è¿™äº›ç°æˆçš„å‡ ä½•å›¾å½¢éƒ½æ²¡æœ‰å®ç°æˆ‘ä»¬çš„`Shape`æ¥å£ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‰è§’å½¢å’Œè±å½¢å®ç°çš„æ˜¯`GeometricShape`æ¥å£ã€‚è€Œä¸”ï¼Œ`GeometricShape`æ¥å£ä¸æˆ‘ä»¬çš„`Shape`æ¥å£ä¸åŒï¼ˆä¸å…¼å®¹ï¼‰ã€‚

â€‹	æˆ‘ä»¬çš„`Drawing`å®¢æˆ·ç«¯ç±»åªèƒ½ä½¿ç”¨`Shape`è€Œä¸èƒ½ä½¿ç”¨`GeometricShape`ã€‚è¿™ä½¿å¾—`GeometricShape`ä¸æˆ‘ä»¬çš„`Drawing`ç±»ä¸å…¼å®¹ã€‚

â€‹	è¿™æ„å‘³ç€æˆ‘ä»¬æœ‰ä¸€äº›ç°æˆçš„ä»£ç ï¼Œè¿™äº›ä»£ç ä¸æˆ‘ä»¬æœŸæœ›çš„éå¸¸ç›¸ä¼¼ï¼Œä½†å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„ç¼–ç è§„èŒƒï¼Œå°±åƒä¸åŒå›½å®¶çš„ç”µæ°”è§„èŒƒä¸€æ ·ã€‚

**ç°åœ¨æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ**

1. æˆ‘ä»¬æ›´æ”¹ä»£ç ï¼Œæ›´æ”¹/åˆ é™¤äº†`Shape`æ¥å£ï¼Œå¹¶ä½¿ç”¨`GeometricShape`æ¥å£ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥å°†`GeometricShape`æ¥å£è½¬æ¢ä¸ºæˆ‘ä»¬çš„`Shape`æ¥å£ï¼Œå¦‚æœæ”¹åŠ¨é‡è¾ƒå°çš„æƒ…å†µä¸‹ã€‚ä½†æ˜¯ï¼Œç”±äºå…¶ä»–åŠŸèƒ½å’Œä»£ç ä¾èµ–æ€§ï¼Œè¿™å¹¶ä¸æ€»æ˜¯å¯èƒ½çš„ã€‚

2. æˆ‘ä»¬æ˜¯å¦åº”è¯¥ä¸ä½¿ç”¨ç°æˆçš„ä»£ç æˆ–è€…ç¬¬ä¸‰æ–¹APIï¼Ÿè‡ªå·±é‡æ–°å¼€å‘ï¼Ÿ


â€‹	ä¸éœ€è¦ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼Œå®ƒå¯ä»¥ä½¿è¿™ä¸ªç°æˆçš„ä»£ç ä¸æˆ‘ä»¬çš„ä»£ç å’Œæœ¬ä¾‹ä¸­çš„`Drawing`å…¼å®¹ã€‚
ç°åœ¨ï¼Œå½“æˆ‘ä»¬å¼„æ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦é€‚é…å™¨æ—¶ï¼Œè®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹é€‚é…å™¨çš„å®é™…åŠŸèƒ½ã€‚åœ¨å¼€å§‹ä¹‹å‰ï¼Œä¸‹é¢æ˜¯é€‚é…å™¨æ¨¡å¼ä¸­ä½¿ç”¨çš„ç±»/å¯¹è±¡åˆ—è¡¨ï¼š
â€‹	Target ï¼šå®šä¹‰å®¢æˆ·ç«¯ä½¿ç”¨çš„ç‰¹å®šäºåŸŸçš„æ¥å£ã€‚è¿™æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„`Shape`æ¥å£ã€‚
â€‹	Adapterï¼šå°†æ¥å£ä»é€‚é…å™¨è°ƒæ•´åˆ°ç›®æ ‡æ¥å£ã€‚æˆ‘å°†æ ¹æ®ä¸‹é¢çš„ä¸åŒæ–¹æ³•æŒ‡å‡ºé€‚é…å™¨ç±»ã€‚
â€‹	Adapteeï¼šå®šä¹‰äº†éœ€è¦è°ƒæ•´çš„ç°æœ‰æ¥å£ã€‚è¿™æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„`GeometricShape`ç•Œé¢ã€‚
â€‹	Clientï¼šè¿™ä¸ç¬¦åˆ`Target`æ¥å£çš„å¯¹è±¡åä½œã€‚`Drawing`ç±»æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„å®¢æˆ·ç«¯ã€‚

**æˆ‘ä»¬æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•æ¥å®ç°é€‚é…å™¨æ¨¡å¼ã€‚**

â­å¯¹è±¡é€‚é…å™¨æ¨¡å¼

â€‹	åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Javaç»„åˆï¼Œå¹¶ä¸”æˆ‘ä»¬çš„é€‚é…å™¨åŒ…å«æºå¯¹è±¡ã€‚ç»„åˆè¢«ç”¨ä½œé€‚é…å™¨å†…åŒ…è£…ç±»çš„å¼•ç”¨ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå®ç°ç›®æ ‡ï¼ˆæœ¬ä¾‹ä¸­ä¸º`Shape`ï¼‰çš„é€‚é…å™¨ç±»ï¼Œå¹¶åœ¨æœ¬ä¾‹ä¸­å¼•ç”¨adaptee-`GeometricShape`ã€‚æˆ‘ä»¬å®ç°äº†ç›®æ ‡ï¼ˆ`Shape`ï¼‰çš„æ‰€æœ‰å¿…éœ€æ–¹æ³•ï¼Œå¹¶è¿›è¡Œäº†å¿…è¦çš„è½¬æ¢ä»¥æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚

ä¸‹é¢æ˜¯`GeometricShapeObjectAdapter`çš„ä»£ç ç¤ºä¾‹ï¼š

```java
public class GeometricShapeObjectAdapter implements Shape {

    private GeometricShape adaptee;

    public GeometricShapeObjectAdapter(GeometricShape adaptee) {
        super();
        this.adaptee = adaptee;
    }

    @Override
    public void draw() {
        adaptee.drawShape();
    }

    @Override
    public void resize() {
        System.out.println(description() + " ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„");
    }

    @Override
    public String description() {
        if (adaptee instanceof Triangle) {
            return "ä¸‰è§’å½¢";
        } else if (adaptee instanceof Rhombus) {
            return "è±å½¢";
        } else {
            return "ä¸çŸ¥é“çš„ç±»å‹";
        }
    }

    @Override
    public boolean isHide() {
        return false;
    }

}

```

ä¸‹é¢æ˜¯`ObjectAdapterMain`ç±»ï¼Œç”¨æ¥çš„æ‰§è¡Œå’Œæµ‹è¯•æˆ‘ä»¬çš„é€‚é…å™¨æ¨¡å¼

```java
    public static void main(String[] args) {
        Drawing drawing = new Drawing();
        drawing.addShape(new Rectangle());
        drawing.addShape(new Circle());
        drawing.addShape(new GeometricShapeObjectAdapter(new Triangle()));
        drawing.addShape(new GeometricShapeObjectAdapter(new Rhombus()));
        System.out.println("å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...");
        drawing.draw();
        System.out.println("å¼€å§‹è°ƒæ•´å¤§å°...");
        drawing.resize();
    }
```

ç¨‹åºæ‰§è¡Œç»“æœï¼š

```java
å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...
ç”»ä¸ªé•¿æ–¹å½¢
ç”»ä¸ªåœˆåœˆ
ç»˜åˆ¶ä¸‰è§’å½¢çš„é¢ç§¯: 0.4330127018922193 å’Œå‘¨é•¿: 3.0
ç»˜åˆ¶è±å½¢çš„é¢ç§¯: 1.0 å’Œå‘¨é•¿: 4.0
å¼€å§‹è°ƒæ•´å¤§å°...
è°ƒæ•´é•¿æ–¹å½¢å¤§å°
è°ƒæ•´åœ†åœˆçš„å¤§å°
ä¸‰è§’å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„
è±å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„
```

â­ç±»é€‚é…å™¨æ¨¡å¼

â€‹	åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Javaç»§æ‰¿å¹¶æ‰©å±•æºç±»ã€‚å› æ­¤ï¼Œå¯¹äºè¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»ä¸º`Triangle`å’Œ`Rhombus`ç±»åˆ›å»ºå•ç‹¬çš„é€‚é…å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

ä¸‹é¢æ˜¯`TriangleAdapter`ä»£ç ç¤ºä¾‹ï¼š

```java
public class TriangleAdapter extends Triangle implements Shape {

    public TriangleAdapter() {
        super();
    }

    @Override
    public void draw() {
        this.drawShape();
    }

    @Override
    public void resize() {
        System.out.println("ä¸‰è§’å½¢ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„");
    }

    @Override
    public String description() {
        return "ä¸‰è§’å½¢";
    }

    @Override
    public boolean isHide() {
        return false;
    }

}
```

ä¸‹é¢æ˜¯`RhombusAdapter`ä»£ç ç¤ºä¾‹

```java
public class RhombusAdapter extends Rhombus implements Shape {

    public RhombusAdapter() {
        super();
    }

    @Override
    public void draw() {
        this.drawShape();
    }

    @Override
    public void resize() {
        System.out.println("è±å½¢ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„");
    }

    @Override
    public String description() {
        return "è±å½¢";
    }

    @Override
    public boolean isHide() {
        return false;
    }

}
```

ä¸‹é¢æ˜¯`ClassAdapterMain`ç±»ï¼Œç”¨æ¥çš„æ‰§è¡Œå’Œæµ‹è¯•æˆ‘ä»¬çš„é€‚é…å™¨æ¨¡å¼

```java
public class ClassAdapterMain {

    public static void main(String[] args) {
        Drawing drawing = new Drawing();
        drawing.addShape(new Rectangle());
        drawing.addShape(new Circle());
        drawing.addShape(new TriangleAdapter());
        drawing.addShape(new RhombusAdapter());

        System.out.println("å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...");
        drawing.draw();
        System.out.println("å¼€å§‹è°ƒæ•´å¤§å°...");
        drawing.resize();
    }

}
```

ç¨‹åºè¾“å‡ºç»“æœï¼š

```java
å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...
ç”»ä¸ªé•¿æ–¹å½¢
ç”»ä¸ªåœˆåœˆ
ç»˜åˆ¶ä¸‰è§’å½¢çš„é¢ç§¯: 0.4330127018922193 å’Œå‘¨é•¿: 3.0
ç»˜åˆ¶è±å½¢çš„é¢ç§¯: 1.0 å’Œå‘¨é•¿: 4.0
å¼€å§‹è°ƒæ•´å¤§å°...
è°ƒæ•´é•¿æ–¹å½¢å¤§å°
è°ƒæ•´åœ†åœˆçš„å¤§å°
ä¸‰è§’å½¢ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„
è±å½¢ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„

Process finished with exit code 0
```

ğŸ“Œè¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰ç›¸åŒçš„è¾“å‡ºã€‚ä½†æ˜¯ï¼š

1. ç±»é€‚é…å™¨ä½¿ç”¨ç»§æ‰¿ï¼Œå¹¶ä¸”åªèƒ½åŒ…è£…ç±»ã€‚æˆ‘ä¸èƒ½åŒ…è£…æ¥å£ï¼Œå› ä¸ºæ ¹æ®å®šä¹‰ï¼Œå®ƒå¿…é¡»ä»æŸä¸ªåŸºç±»æ´¾ç”Ÿã€‚
2. å¯¹è±¡é€‚é…å™¨ä½¿ç”¨ç»„åˆï¼Œå¯ä»¥åŒ…è£…ç±»å’Œæ¥å£ã€‚å®ƒåŒ…å«å¯¹ç±»æˆ–æ¥å£å¯¹è±¡å®ä¾‹çš„å¼•ç”¨ã€‚å¯¹è±¡é€‚é…å™¨æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¯ä»¥åº”ç”¨äºå¤§å¤šæ•°åœºæ™¯ã€‚


æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å®ç°ç›®æ ‡ï¼ˆ`Shape`ï¼‰å’Œè¢«é€‚é…å™¨ï¼ˆ`GeometricalShape`ï¼‰æ¥åˆ›å»ºé€‚é…å™¨ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºåŒå‘é€‚é…å™¨ã€‚
â­åŒå‘é€‚é…å™¨
	åŒå‘é€‚é…å™¨æ˜¯å®ç°ç›®æ ‡å’Œé€‚é…å™¨æ¥å£çš„é€‚é…å™¨ã€‚é€‚åº”å¯¹è±¡å¯ä»¥åœ¨å¤„ç†ç›®æ ‡ç±»çš„æ–°ç³»ç»Ÿä¸­ç”¨ä½œç›®æ ‡ï¼Œä¹Ÿå¯ä»¥åœ¨å¤„ç†é€‚åº”å¯¹è±¡ç±»çš„å…¶ä»–ç³»ç»Ÿä¸­ç”¨ä½œé€‚åº”å¯¹è±¡ã€‚åŒå‘é€‚é…å™¨çš„ä½¿ç”¨å¾ˆå°‘ï¼Œæˆ‘ä»æ¥æ²¡æœ‰æœºä¼šåœ¨é¡¹ç›®ä¸­ç¼–å†™è¿™æ ·çš„é€‚é…å™¨ã€‚ä½†æ˜¯ï¼Œä¸‹é¢æä¾›çš„ä»£ç æ¢ç´¢äº†åŒå‘é€‚é…å™¨çš„å¯èƒ½å®ç°ã€‚

ä»¥ä¸‹æ˜¯å„ç§å½¢çŠ¶å¯¹è±¡ç±»å‹çš„`ShapeType`æšä¸¾çš„ä»£ç ï¼š

```java
public enum ShapeType {

    /**
     * å„ç§å½¢çŠ¶å¯¹è±¡ç±»å‹çš„æšä¸¾
     */
    CIRCLE,
    RECTANGLE,
    TRIANGLE,
    RHOMBUS
}
```

ä¸‹é¢æ˜¯`TwoWaysAdapter`çš„ä»£ç ï¼Œå®ƒå¯ä»¥ç”¨ä½œä¸‰è§’å½¢ã€è±å½¢ã€åœ†å½¢æˆ–çŸ©å½¢ã€‚

```java
public class TwoWaysAdapter implements Shape, GeometricShape {


    private ShapeType shapeType;

    public TwoWaysAdapter() {
        this(ShapeType.TRIANGLE);
    }

    public TwoWaysAdapter(ShapeType shapeType) {
        super();
        this.shapeType = shapeType;
    }

    @Override
    public void draw() {
        switch (shapeType) {
            case CIRCLE:
                new Circle().draw();
                break;
            case RECTANGLE:
                new Rectangle().draw();
                break;
            case TRIANGLE:
                new Triangle().drawShape();
                break;
            case RHOMBUS:
                new Rhombus().drawShape();
                break;
            default:
                break;
        }
    }

    @Override
    public void resize() {
        switch (shapeType) {
            case CIRCLE:
                new Circle().resize();
                break;
            case RECTANGLE:
                new Rectangle().resize();
                break;
            case TRIANGLE:
                System.out.println("ä¸‰è§’å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„");
                break;
            case RHOMBUS:
                System.out.println("è±å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„");
                break;
            default:
                break;
        }
    }

    @Override
    public String description() {
        switch (shapeType) {
            case CIRCLE:
                return new Circle().description();
            case RECTANGLE:
                return new Rectangle().description();
            case TRIANGLE:
                return "ä¸‰è§’å½¢";
            case RHOMBUS:
                return "è±å½¢";
            default:
                break;
        }
        return "Unknown object";
    }

    @Override
    public boolean isHide() {
        return false;
    }

    @Override
    public double area() {
        switch (shapeType) {
            case CIRCLE:
            case RECTANGLE:
                return 0.0d;
            case TRIANGLE:
                return new Triangle().area();
            case RHOMBUS:
                return new Rhombus().area();
        }
        return 0.0d;
    }

    @Override
    public double perimeter() {
        switch (shapeType) {
            case CIRCLE:
            case RECTANGLE:
                return 0.0d;
            case TRIANGLE:
                return new Triangle().perimeter();
            case RHOMBUS:
                return new Rhombus().perimeter();
        }
        return 0.0d;
    }

    @Override
    public void drawShape() {
        draw();
    }

}
```

ä¸‹é¢æ˜¯`TwoWaysAdapterMain`ç±»ï¼Œç”¨æ¥çš„æ‰§è¡Œå’Œæµ‹è¯•æˆ‘ä»¬çš„é€‚é…å™¨æ¨¡å¼

```java
public class TwoWaysAdapterMain {

    public static void main(String[] args) {
        Drawing drawing = new Drawing();
        drawing.addShape(new TwoWaysAdapter(ShapeType.RECTANGLE));
        drawing.addShape(new TwoWaysAdapter(ShapeType.CIRCLE));
        drawing.addShape(new TwoWaysAdapter(ShapeType.TRIANGLE));
        drawing.addShape(new TwoWaysAdapter(ShapeType.RHOMBUS));

        System.out.println("å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...");
        drawing.draw();
        System.out.println("å¼€å§‹è°ƒæ•´å¤§å°...");
        drawing.resize();
    }

}
```

ç¨‹åºè¾“å‡ºç»“æœ

```java
å¼€å§‹ç»˜åˆ¶å½¢çŠ¶...
ç”»ä¸ªé•¿æ–¹å½¢
ç”»ä¸ªåœˆåœˆ
ç»˜åˆ¶ä¸‰è§’å½¢çš„é¢ç§¯: 0.4330127018922193 å’Œå‘¨é•¿: 3.0
ç»˜åˆ¶è±å½¢çš„é¢ç§¯: 1.0 å’Œå‘¨é•¿: 4.0
å¼€å§‹è°ƒæ•´å¤§å°...
è°ƒæ•´é•¿æ–¹å½¢å¤§å°
è°ƒæ•´åœ†åœˆçš„å¤§å°
ä¸‰è§’å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„
è±å½¢ ä¸èƒ½è¢«è°ƒæ•´å¤§å°ï¼Œè¯·ä½¿ç”¨å¿…é¡»å€¼åˆ›å»ºæ–°çš„

Process finished with exit code 0

```

ğŸ‘‰è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¾—åˆ°äº†ç›¸åŒçš„è¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬ä»¥ç›¸åŒçš„æ–¹å¼å°†`TwoWaysAdapter`ç”¨äºå®¢æˆ·ç«¯çš„å›¾å½¢ç»˜åˆ¶ã€‚è¿™é‡Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨`TwoWaysAdapter`ï¼Œæˆ‘ä»¬çš„`Shape`æ¥å£è¿˜å¯ä»¥ä¸é¢å¤–çš„å‡ ä½•å›¾å½¢APIså®¢æˆ·ç«¯ç±»ä¸€èµ·ä½¿ç”¨ã€‚å› æ­¤ï¼Œ`Shape`å’Œ`GeometricalShape`éƒ½å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚

**é€‚é…å™¨ä¸è£…é¥°è®¾è®¡æ¨¡å¼ï¼š**

è¿™é‡Œæ˜¯åŒºåˆ†é€‚é…å™¨å’Œè£…é¥°å™¨æ¨¡å¼çš„ä¸€äº›å…³é”®ç‚¹ï¼ˆè¯·å‚é˜…æˆ‘çš„æ–‡ç« ã€ŠJavaä¸­çš„è£…é¥°å™¨è®¾è®¡æ¨¡å¼ã€‹ä¸­çš„æ›´å¤šå†…å®¹ï¼‰ã€‚

é€‚é…å™¨æ¨¡å¼ï¼š

- åˆ¶ä½œåŒ…è£…å™¨ï¼ˆé€‚é…å™¨ï¼‰ä»¥åˆ›å»ºä»ä¸€ä¸ªæ¥å£åˆ°å¦ä¸€ä¸ªä¸å…¼å®¹æ¥å£çš„å…¼å®¹æ€§/è½¬æ¢ã€‚

- åŒ…è£…å™¨ï¼ˆé€‚é…å™¨ï¼‰é€‚ç”¨äºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£/ç±»ã€‚

- ç¼–å†™åŒ…è£…å™¨ç±»çš„ç›®çš„æ˜¯è§£å†³å·®å¼‚å¹¶ä½¿æ¥å£å…¼å®¹ã€‚

- æˆ‘ä»¬å¾ˆå°‘åœ¨åŒ…è£…å™¨ç±»ä¸­æ·»åŠ ä»»ä½•åŠŸèƒ½ã€‚


è£…é¥°å›¾æ¡ˆï¼š

- åˆ¶ä½œä¸€ä¸ªåŒ…è£…å™¨ï¼ˆDecoratorï¼‰æ¥æ·»åŠ /ä¿®æ”¹æ¥å£/ç±»ä¸­çš„åŠŸèƒ½ï¼Œè€Œä¸æ›´æ”¹ç±»çš„åŸå§‹ä»£ç ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨æŠ½è±¡åŒ…è£…å™¨æ¥å®ç°æ­¤æ¨¡å¼ã€‚

- Wraperï¼ˆDecoratorï¼‰åœ¨å•ä¸ªæ¥å£/ç±»ä¸Šå·¥ä½œã€‚

- ç¼–å†™åŒ…è£…å™¨ç±»çš„ç›®çš„æ˜¯æ·»åŠ /ä¿®æ”¹æ¥å£/ç±»çš„åŠŸèƒ½ã€‚

- ä¸å­˜åœ¨ä¸å…¼å®¹é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªæ¥å£/ç±»ã€‚

## æ€»ç»“

é€‚é…å™¨æ¨¡å¼å…è®¸å°†æœ¬æ¥ä¸å…¼å®¹çš„å¯¹è±¡åŒ…è£…åœ¨é€‚é…å™¨ä¸­ï¼Œä»¥ä½¿å…¶ä¸å¦ä¸€ä¸ªç±»å…¼å®¹ã€‚

**ä¼˜ç‚¹ï¼š** 

1. å¯ä»¥è®©ä»»ä½•ä¸¤ä¸ªæ²¡æœ‰å…³è”çš„ç±»ä¸€èµ·è¿è¡Œã€‚
2. æé«˜äº†ç±»çš„å¤ç”¨ã€‚
3. å¢åŠ äº†ç±»çš„é€æ˜åº¦ã€‚
4. çµæ´»æ€§å¥½ã€‚

**ç¼ºç‚¹ï¼š** 

1. è¿‡å¤šåœ°ä½¿ç”¨é€‚é…å™¨ï¼Œä¼šè®©ç³»ç»Ÿéå¸¸é›¶ä¹±ï¼Œä¸æ˜“æ•´ä½“è¿›è¡ŒæŠŠæ¡ã€‚æ¯”å¦‚ï¼Œæ˜æ˜çœ‹åˆ°è°ƒç”¨çš„æ˜¯ A æ¥å£ï¼Œå…¶å®å†…éƒ¨è¢«é€‚é…æˆäº† B æ¥å£çš„å®ç°ï¼Œä¸€ä¸ªç³»ç»Ÿå¦‚æœå¤ªå¤šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ— å¼‚äºä¸€åœºç¾éš¾ã€‚å› æ­¤å¦‚æœä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œå¯ä»¥ä¸ä½¿ç”¨é€‚é…å™¨ï¼Œè€Œæ˜¯ç›´æ¥å¯¹ç³»ç»Ÿè¿›è¡Œé‡æ„ã€‚
2. ç”±äº JAVA è‡³å¤šç»§æ‰¿ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥è‡³å¤šåªèƒ½é€‚é…ä¸€ä¸ªé€‚é…è€…ç±»ï¼Œè€Œä¸”ç›®æ ‡ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚

**ä½¿ç”¨åœºæ™¯ï¼š**

- å¸Œæœ›ä½¿ç”¨ç°æœ‰ç±»ï¼Œä½†å…¶æ¥å£ä¸ä½ éœ€è¦çš„æ¥å£ä¸åŒ¹é…

- å¸Œæœ›åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„ç±»ï¼Œè¯¥ç±»ä¸ä¸ç›¸å…³æˆ–ä¸å¯é¢„è§çš„ç±»åä½œï¼Œå³ä¸ä¸€å®šå…·æœ‰å…¼å®¹æ¥å£çš„ç±»

- éœ€è¦ä½¿ç”¨å‡ ä¸ªç°æœ‰çš„å­ç±»ï¼Œä½†é€šè¿‡å¯¹æ¯ä¸ªå­ç±»è¿›è¡Œå­ç±»åŒ–æ¥è°ƒæ•´å®ƒä»¬çš„æ¥å£æ˜¯ä¸åˆ‡å®é™…çš„ã€‚å¯¹è±¡é€‚é…å™¨å¯ä»¥è°ƒæ•´å…¶çˆ¶ç±»çš„æ¥å£ã€‚

- å¤§å¤šæ•°ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„åº”ç”¨ç¨‹åºéƒ½ä½¿ç”¨é€‚é…å™¨ä½œä¸ºåº”ç”¨ç¨‹åºå’Œç¬¬ä¸‰æ–¹ç¨‹åºåº“ä¹‹é—´çš„ä¸­é—´å±‚ï¼Œä»¥å°†åº”ç”¨ç¨‹åºä¸åº“è§£è€¦ã€‚å¦‚æœå¿…é¡»ä½¿ç”¨å¦ä¸€ä¸ªåº“ï¼Œåˆ™åªéœ€è¦æ–°åº“çš„é€‚é…å™¨ï¼Œè€Œæ— éœ€æ›´æ”¹åº”ç”¨ç¨‹åºä»£ç ã€‚

**æ³¨æ„äº‹é¡¹ï¼š**

é€‚é…å™¨ä¸æ˜¯åœ¨è¯¦ç»†è®¾è®¡æ—¶æ·»åŠ çš„ï¼Œè€Œæ˜¯è§£å†³æ­£åœ¨æœå½¹çš„é¡¹ç›®çš„é—®é¢˜ã€‚

**ç»å…¸ä¾‹å­**

* [java.util.Arrays#asList()](http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList%28T...%29)
* [java.util.Collections#list()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#list-java.util.Enumeration-)
* [java.util.Collections#enumeration()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#enumeration-java.util.Collection-)
* [javax.xml.bind.annotation.adapters.XMLAdapter](http://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#marshal-BoundType-)









