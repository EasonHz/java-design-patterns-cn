# æ¡¥æ¥æ¨¡å¼

## ä»‹ç»

ğŸæ¡¥æ¥æ¨¡å¼æ˜¯ä¸€ç§ç»“æ„æ¨¡å¼ï¼Œç”¨äºå°†æŠ½è±¡ä¸å…¶å®ç°è§£è€¦ï¼Œä»¥ä¾¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚
ğŸæ¡¥æ¥æ¨¡å¼é€šè¿‡åœ¨æŠ½è±¡ç±»å’Œå®ç°ç±»ä¹‹é—´æä¾›æ¡¥æ¥ç»“æ„æ¥è§£è€¦æŠ½è±¡ç±»å’Œå®ƒçš„å®ç°ç±»ã€‚åˆ©ç”¨å°è£…ã€èšåˆå’Œç»§æ‰¿æ¥å°†è´£ä»»åˆ†ç¦»åˆ°ä¸åŒçš„ç±»ä¸­
ğŸæ¡¥æ¥æ¨¡å¼å¯ä»¥è®©æˆ‘ä»¬é¿å…æŠ½è±¡ä¸å…¶å®ç°ä¹‹é—´çš„ç¼–è¯‘æ—¶ç»‘å®šï¼Œè¿™æ ·å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶é€‰æ‹©å…·ä½“å®ç°ã€‚

## å®ç°

**ğŸ‘‰æ¡ˆä¾‹ï¼š**
å‡è®¾æœ‰ä¸€å®¶å…¬å¸ç”Ÿäº§å„ç§ç±»å‹çš„è½¦è¾†ï¼Œå¦‚è‡ªè¡Œè½¦ã€æ±½è½¦å’Œå…¬å…±æ±½è½¦ã€‚ç”±äºå¯ä»¥å¼•å…¥æ–°çš„è‡ªè¡Œè½¦å’Œæ±½è½¦æ¨¡å‹ï¼Œå¹¶ä¸”æœ‰ä¸åŒçš„åˆ¶é€ å·¥è‰ºï¼Œå› æ­¤è½¦è¾†ç»å¸¸å‘ç”Ÿå˜åŒ–ã€‚æœªæ¥å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–æ–°çš„è½¦è¾†ï¼Œå¦‚å°å‹æ‘©æ‰˜è½¦æˆ–å¡è½¦ã€‚

æ‰€æœ‰è½¦è¾†éƒ½åœ¨è½¦é—´è¢«åˆ¶é€ ã€è£…é…ã€è´¨æ£€ã€‚ä¸‹é¢æ˜¯äº¤é€šå·¥å…·ç±»`Vehicle`

```java
/**
 * äº¤é€šå·¥å…·ç±»
 *
 * @author hz
 * @since 2022/10/11
 */
public abstract class Vehicle {

    /**
     * è½¦é—´çš„è£…é…çº¿
     */
    protected List<WorkShop> workshops = new ArrayList<>();

    protected Vehicle() {
        super();
    }

    /**
     * æ·»åŠ è½¦é—´
     *
     * @param workshop è½¦é—´
     * @return æ˜¯å¦æ·»åŠ æˆåŠŸ
     */
    public boolean joinWorkshop(WorkShop workshop) {
        return workshops.add(workshop);
    }

    /**
     * åˆ¶é€ äº¤é€šå·¥å…·
     */
    public abstract void manufacture();

    /**
     * åˆ¶é€ èŠ±è´¹çš„æ—¶é—´
     *
     * @return æ—¶é—´
     */
    public abstract int minWorkTime();

}

```

ä¸‹é¢æ˜¯è‡ªè¡Œè½¦ğŸš²`Bike`ç±»

```java
public class Bike extends Vehicle {

    @Override
    public void manufacture() {
        System.out.println("åˆ¶é€ è‡ªè¡Œè½¦");
        workshops.forEach(workshop -> workshop.work(this));
        System.out.println("åˆ¶é€ å®Œæˆ");
        System.out.println();
    }

    @Override
    public int minWorkTime() {
        return 5;
    }

}

```

ä¸‹é¢æ˜¯æ±½è½¦ğŸš—`Car`ç±»

```java
public class Car extends Vehicle {

    @Override
    public void manufacture() {
        System.out.println("åˆ¶é€ æ±½è½¦");
        workshops.stream().forEach(workshop -> workshop.work(this));
        System.out.println("åˆ¶ä½œå®Œæˆ");
        System.out.println();
    }

    @Override
    public int minWorkTime() {
        return 10;
    }

}
```

ä¸‹é¢æ˜¯ğŸšŒ`Bus`ç±»

```java
public class Bus extends Vehicle {

    @Override
    public void manufacture() {
        System.out.println("åˆ¶é€ å·´å£«");
        workshops.stream().forEach(workshop -> workshop.work(this));
        System.out.println("åˆ¶é€ å®Œæˆ");
        System.out.println();
    }

    @Override
    public int minWorkTime() {
        return 20;
    }

}
```

å®šä¹‰äº†è½¦è¾†ç±»å‹åï¼Œæˆ‘ä»¬æ²¡æœ‰å®ç°å…·ä½“çš„åˆ¶é€ ç±»ï¼Œå¦‚`ProduceBike`ã€`AssembleBike`ã€`ProduceCar`æˆ–`AssembleCar`ã€‚
ç°åœ¨åˆ›å»ºæ¥å£`WorkShop`ï¼Œè®©æ¯è¾†è½¦éƒ½åŠ å…¥è½¦é—´æ‰§è¡Œå…¶åˆ¶é€ æˆ–ç»´ä¿®è¿‡ç¨‹ã€‚å®ƒå°†å……å½“è½¦è¾†ç±»å‹å’Œå…·ä½“è½¦é—´ï¼ˆå®ç°è€…ï¼‰ä¹‹é—´çš„æ¡¥æ¢ï¼Œå¹¶ä½¿ç”¨workï¼ˆï¼‰æ–¹æ³•æ‰§è¡Œåˆ¶é€ å·¥ä½œã€‚
ä¸‹é¢æ˜¯ä»£ç `WorkShop`:

```java
/**
 * è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public abstract class WorkShop {

    /**
     * è½¦è¾†åˆ¶é€ æ–¹æ³•
     *
     * @param vehicle è¦åˆ¶é€ çš„äº¤é€šå·¥å…·
     */
    public abstract void work(Vehicle vehicle);

}
```

`WorkShop`å……å½“å„ç§ç±»å‹è½¦è¾†åŠå…¶åˆ¶é€ å·¥ä½œï¼ˆå®æ–½è€…ï¼‰ä¹‹é—´çš„æ¡¥æ¢ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º`WorkShop`çš„å®æ–½è€…ï¼Œä»¥å®šä¹‰æ‰§è¡Œåˆ¶é€ å·¥ä½œæ‰€éœ€çš„å„ç§ç±»å‹çš„è½¦é—´ã€‚
ä»¥ä¸‹æ˜¯`ProduceWorkShop`ç±»çš„ä»£ç ï¼š

```java
/**
 * ç”Ÿäº§è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public class ProduceWorkShop extends WorkShop {

    public ProduceWorkShop() {
        super();
    }

    @Override
    public void work(Vehicle vehicle) {
        System.out.print("ç”Ÿäº§ä¸­... ");
        long timeToTake = 300L * vehicle.minWorkTime();
        try {
            TimeUnit.MILLISECONDS.sleep(timeToTake);
        } catch (InterruptedException exp) {
            // nothing to do for now.
        }
        System.out.printf("(Time taken: %d millis), Done.\n", timeToTake);
    }

}
```

ä¸‹é¢æ˜¯`AssembleWorkShop`ä»£ç 

```java
/**
 * è£…é…è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public class AssembleWorkShop extends WorkShop {

    public AssembleWorkShop() {
        super();
    }

    @Override
    public void work(Vehicle vehicle) {
        System.out.print("è£…é…ä¸­... ");
        long timeToTake = 200L * vehicle.minWorkTime();
        try {
            TimeUnit.MILLISECONDS.sleep(timeToTake);
        } catch (InterruptedException exp) {
            // nothing to do for now.
        }
        System.out.printf("(Time taken: %d millis), Done.\n", timeToTake);
    }

}

```

ä¸‹é¢æ˜¯PaintWorkShopä»£ç 

```java
/**
 * æ²¹æ¼†è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public class PaintWorkShop extends WorkShop {

    public PaintWorkShop() {
        super();
    }

    @Override
    public void work(Vehicle vehicle) {
        System.out.print("å–·æ¼†ä¸­... ");
        long timeToTake = 100 * vehicle.minWorkTime();
        try {
            TimeUnit.MILLISECONDS.sleep(timeToTake);
        } catch (InterruptedException exp) {
            // nothing to do for now.
        }
        System.out.printf("(Time taken: %d millis), Done.\n", timeToTake);
    }

}

```

ä¸‹é¢æ˜¯RepairWorkShopä»£ç 

```java
/**
 * ç»´ä¿®è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public class RepairWorkShop extends WorkShop {

    public RepairWorkShop() {
        super();
    }

    @Override
    public void work(Vehicle vehicle) {
        System.out.print("ç»´ä¿®ä¸­... ");
        long timeToTake = 150L * vehicle.minWorkTime();
        try {
            TimeUnit.MILLISECONDS.sleep(timeToTake);
        } catch (InterruptedException exp) {
            // nothing to do for now.
        }
        System.out.printf("(Time taken: %d millis), Done.\n", timeToTake);
    }

}
```

ä¸‹é¢æ˜¯`TestWorkShop`ä»£ç 

```java
/**
 * è´¨æ£€è½¦é—´
 *
 * @author hz
 * @since 2022/10/11
 */
public class TestWorkShop extends WorkShop {

    public TestWorkShop() {
        super();
    }

    @Override
    public void work(Vehicle vehicle) {
        System.out.print("è´¨æ£€ä¸­... ");
        long timeToTake = 50L * vehicle.minWorkTime();
        try {
            TimeUnit.MILLISECONDS.sleep(timeToTake);
        } catch (InterruptedException exp) {
            // nothing to do for now.
        }
        System.out.printf("(Time taken: %d millis), Done.\n", timeToTake);
    }

}
```

ä¸ºäº†è®©è¿™ä¸ªä¾‹å­æ›´æœ‰è¶£ï¼Œæˆ‘å°†å®šæ—¶ç¡çœ è®¾ç½®ä¸ºå‡ æ¯«ç§’ï¼Œä»¥è¡¨æ˜è½¦é—´åœ¨åˆ¶é€ ä¸åŒç±»å‹çš„è½¦è¾†æ—¶èŠ±è´¹äº†ä¸åŒçš„æ—¶é—´ã€‚ä»£ç ä¸­æœ‰è¶£çš„éƒ¨åˆ†æ˜¯è½¦è¾†ï¼ˆ`Bike`,` Car`, `Bus`ï¼‰æ¡¥æ¥æ¨¡å¼ç±»å‹çš„ä½¿ç”¨ï¼Œå…¶åˆ¶é€ å®ç°ï¼ˆ`ProduceWorkShop`,`AssemableWorkShop`,`PaintWorkShop`,`TestWorkShop`ï¼‰é€šè¿‡`WorkShop`æ¥å£å®Œå…¨ç‹¬ç«‹ã€‚
è½¦è¾†å’Œè½¦é—´é€šè¿‡`WorkShop Bridge`æ¥å£è¿æ¥ï¼Œç›¸äº’ç‹¬ç«‹ã€‚å¦‚æœéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±æ›´æ”¹å®ƒä»¬å¹¶å®šä¹‰æ–°çš„ã€‚

ç°åœ¨ï¼Œè€babyä»¬ï¼Œä¸€èµ·æ¥çœ‹çœ‹æ‰§è¡Œå’Œæµ‹è¯•æ¡¥æ¥æ¨¡å¼ä»£ç çš„ä¸»ç¨‹åºï¼š

```java
public class Main {

    public static void main(String[] args) {
        Vehicle bike = new Bike();
        bike.joinWorkshop(new ProduceWorkShop());
        bike.joinWorkshop(new AssembleWorkShop());
        bike.joinWorkshop(new TestWorkShop());
        bike.manufacture();

        Vehicle car = new Car();
        car.joinWorkshop(new ProduceWorkShop());
        car.joinWorkshop(new AssembleWorkShop());
        car.joinWorkshop(new PaintWorkShop());
        car.joinWorkshop(new TestWorkShop());
        car.manufacture();

        Vehicle bus = new Bus();
        bus.joinWorkshop(new RepairWorkShop());
        bus.joinWorkshop(new AssembleWorkShop());
        bus.joinWorkshop(new TestWorkShop());
        bus.manufacture();
    }

}

```

ç¨‹åºè¾“å‡ºç»“æœ

```java
åˆ¶é€ è‡ªè¡Œè½¦
ç”Ÿäº§ä¸­... (Time taken: 1500 millis), Done.
è£…é…ä¸­... (Time taken: 1000 millis), Done.
è´¨æ£€ä¸­... (Time taken: 250 millis), Done.
åˆ¶é€ å®Œæˆ

åˆ¶é€ æ±½è½¦
ç”Ÿäº§ä¸­... (Time taken: 3000 millis), Done.
è£…é…ä¸­... (Time taken: 2000 millis), Done.
å–·æ¼†ä¸­... (Time taken: 1000 millis), Done.
è´¨æ£€ä¸­... (Time taken: 500 millis), Done.
åˆ¶ä½œå®Œæˆ

åˆ¶é€ å·´å£«
ç»´ä¿®ä¸­... (Time taken: 3000 millis), Done.
è£…é…ä¸­... (Time taken: 4000 millis), Done.
è´¨æ£€ä¸­... (Time taken: 1000 millis), Done.
åˆ¶é€ å®Œæˆ


Process finished with exit code 0

```



## æ€»ç»“

**ä¼˜ç‚¹**

1.  æŠ½è±¡å’Œå®ç°çš„åˆ†ç¦»ã€‚
2.  ä¼˜ç§€çš„æ‰©å±•èƒ½åŠ›ã€‚
3.  å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ã€‚

**ç¼ºç‚¹**

æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚

**ä½¿ç”¨åœºæ™¯**

- ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•ã€‚
- å¸Œæœ›é¿å…æŠ½è±¡ä¸å…¶å®ç°ä¹‹é—´çš„æ°¸ä¹…ç»‘å®šã€‚ä¾‹å¦‚ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶å¯é€‰æ‹©æˆ–åˆ‡æ¢ä¸åŒçš„å®ç°ã€‚

- æŠ½è±¡åŠå…¶å®ç°éƒ½åº”è¯¥é€šè¿‡å­ç±»åŒ–è¿›è¡Œæ‰©å±•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¡¥æ¥æ¨¡å¼å¯ä»¥ç»„åˆä¸åŒçš„æŠ½è±¡å’Œå®ç°ï¼Œå¹¶ç‹¬ç«‹æ‰©å±•å®ƒä»¬ã€‚

- æŠ½è±¡å®ç°ä¸­çš„æ›´æ”¹ä¸åº”å¯¹å®¢æˆ·ç«¯äº§ç”Ÿå½±å“ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬çš„ä»£ç ä¸å¿…é‡æ–°ç¼–è¯‘ã€‚






















